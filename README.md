# 2025_IMAO_DnD_Assistant_ML

## –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### –°–æ–∑–¥–∞–Ω–∏–µ –∏ –∞–∫—Ç–∏–≤–∞—Ü–∏—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```
python3.10 -m venv venv
```

```
source ./venv/bin/activate
``` 

–∏–ª–∏ 

```
python3.10 -m venv venv_open_router
``` 

```
source ./venv_open_router/bin/activate
``` 

```
pip install -r ./actions_processor_llm/requirements.txt
```

–∏–ª–∏ 

```
python3.10 -m venv venv_bestiary_img
``` 

```
source ./venv_bestiary_img/bin/activate
``` 

```
pip install -r ./bestiary_images_scripts/requirements.txt
```

## battle_description_ms

gRPC –º–∏–∫—Ä–æ—Å–µ–≤–∏—Å –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –æ–ø–∏—Å–∞–Ω–∏—è —Å—Ä–∞–∂–µ–Ω–∏–π

–î–ª—è —Ä–∞–±–æ—Ç—ã —Ç—Ä–µ–±—É–µ—Ç—Å—è `secrets.json` —Å –ø—Ä–æ–∫—Å–∏ 

### –§–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞ `secrets.json`

–§–∞–π–ª `secrets.json` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è API-–∫–ª—é—á–µ–π OpenAI –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö –ø—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä–æ–≤.

#### –ü—Ä–∏–º–µ—Ä —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ:

```json
{
    "api_keys_with_proxies": [
        {
            "api_key": "sk-or-v1-xxxxxxxxxxxxxxxxxxxxxxxxx",
            "proxy": "socks5://username:password@127.0.0.1:5000"
        },
        {
            "api_key": "sk-or-v1-xxxxxxxxxxxxxxxxxxxxxxxxx",
            "proxy": "socks5://username:password@127.0.0.1:5000"
        }
    ]
}
```
### –î–ª—è –∑–∞–ø—É—Å–∫–∞

```bash
python3 battle_description_ms/main.py
```

### –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞

```bash
python3 battle_description_ms/client.py
```

## creature_generator

**–¢–ï–ö–£–©–ò–ô –ö–û–î –ù–ï –†–ê–ë–û–¢–ê–ï–¢ –° MONGO –° TLS, –Ω—É–∂–Ω–æ —ç—Ç–æ –∫–∞–∫-—Ç–æ –ø–æ–ø—Ä–∞–≤–∏—Ç—å**

http —Å–µ—Ä–≤–∏—Å –∑–∞–ø—É—Å–∫–∞–µ–º—ã–π –Ω–∞ VM –≤–Ω–µ –†–§ –¥–ª—è –ø–æ—Ö–æ–¥–æ–≤ –≤ API Gemini

### Start Proxy 

–î–ª—è API Gemini –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è –¥—Ä—É–≥–∏—Ö API, —Ä–∞–±–æ—Ç–∞—é—â–∏—Ö –ø–æ http, –∞ –Ω–µ –ø–æ gRPC

```bash
cd ~/Documents/Xray-linux-64
```

```bash
./xray run -c config.json
```

### tmux (–¥–ª—è –∑–∞–ø—É—Å–∫–∞ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π —Å–µ—Å—Å–∏–∏ —á–µ—Ä–µ–∑ SSH —Ç–µ—Ä–º–∏–Ω–∞–ª)

–ó–∞–ø—É—Å–∫ —Å–µ—Å—Å–∏–∏:

 ```bash
tmux
``` 

–ó–∞–ø—É—Å–∫–∞–π Flask:
 ```bash
python3 creature_generator/main.py
``` 

–ß—Ç–æ–±—ã –≤—ã–π—Ç–∏ –∏–∑ tmux, –Ω–µ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—è –ø—Ä–æ—Ü–µ—Å—Å—ã:

–ó–∞–ø—É—Å–∫–∞–π Flask:
 ```bash
Ctrl + b, –∑–∞—Ç–µ–º d
``` 

–ß—Ç–æ–±—ã —Å–Ω–æ–≤–∞ –∑–∞–π—Ç–∏ –≤ —Å–µ—Å—Å–∏—é:

 ```bash
tmux attach
``` 

## bestiary_images_scripts

#### change_http_to_https_for_img.py

–ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ MongoDB –∏ –∑–∞–º–µ–Ω—è–µ—Ç —Å—Ç–∞—Ä—ã–µ URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –Ω–∞ –Ω–æ–≤—ã–µ

#### cv2_test.py

—Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç –¥–≤–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å –ø–æ–º–æ—â—å—é SIFT –∏ –≤–∏–∑—É–∞–ª–∏–∑–∏—Ä—É–µ—Ç –æ–±–ª–∞—Å—Ç—å —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è –Ω–∞ –≤—Ç–æ—Ä–æ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–∏

#### cv2_test_2.py

–Ω–∞—Ö–æ–¥–∏—Ç —Ñ—Ä–∞–≥–º–µ–Ω—Ç –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–∏ —Å –ø–æ–º–æ—â—å—é SIFT, –æ–±—Ä–µ–∑–∞–µ—Ç –µ–≥–æ –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∫–∞–∫ `.webp` —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç–∏

#### final_parse_script.py

–æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —Å—É—â–µ—Å—Ç–≤ –∏–∑ `bestiary_data.json` –≤ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–∞—Ö.  
  –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Å—É—â–µ—Å—Ç–≤–∞ –¥–µ–ª–∞–µ—Ç –∑–∞–ø—Ä–æ—Å –∫ API, –∑–∞–≥—Ä—É–∂–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ MinIO (S3), –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å—Å—ã–ª–∫–∏ –≤ JSON –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ MongoDB.  
  –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `multiprocessing` –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ `tqdm` –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞.  
  ‚ö†Ô∏è –í–æ–∑–º–æ–∂–µ–Ω deadlock –ø—Ä–∏ –±–æ–ª—å—à–æ–º —á–∏—Å–ª–µ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –∏–∑-–∑–∞ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–µ–π —Ä–∞–±–æ—Ç—ã python –∫–ª–∏–µ–Ω—Ç–∞ MongoDB —Å `multiprocessing`

#### mongo_db_delete_three_and_more.py

–æ–±—Ä–µ–∑–∞–µ—Ç –º–∞—Å—Å–∏–≤ `images` –≤ –∫–∞–∂–¥–æ–º –¥–æ–∫—É–º–µ–Ω—Ç–µ MongoDB –¥–æ –ø–µ—Ä–≤—ã—Ö –¥–≤—É—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤, –µ—Å–ª–∏ –∏—Ö –±–æ–ª—å—à–µ

#### mongo_db_test.py

–∑–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ `bestiary_data.json` –≤ MongoDB –∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å –ø–æ–∏—Å–∫ —Å—É—â–µ—Å—Ç–≤ –ø–æ —Ä—É—Å—Å–∫–æ–º—É –∏–º–µ–Ω–∏

#### mongo_db_test_2.py

–≤—ã–≤–æ–¥–∏—Ç –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ `creatures` –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–µ—Ä–≤—ã–µ 5 –∏–∑ –Ω–∏—Ö

#### processing_images_400x300.py

–∏–∑–≤–ª–µ–∫–∞–µ—Ç —Ñ—Ä–∞–≥–º–µ–Ω—Ç —Å –ø–æ–º–æ—â—å—é SIFT –∏–∑ –ø–∞—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π, –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –∏–∑ MinIO (S3), –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –µ–≥–æ –æ–±—Ä–∞—Ç–Ω–æ –≤ S3, –∞ –∑–∞—Ç–µ–º –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –¥–æ–∫—É–º–µ–Ω—Ç –≤ MongoDB.  
  –°–∫—Ä–∏–ø—Ç:
  - –ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ MongoDB –∏ –ø–æ–ª—É—á–∞–µ—Ç –∫–æ–ª–ª–µ–∫—Ü–∏—é —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏ —Å—É—â–µ—Å—Ç–≤.
  - –î–ª—è –∫–∞–∂–¥–æ–π –∑–∞–ø–∏—Å–∏ –±–µ—Ä—ë—Ç –ø–µ—Ä–≤—É—é (–∏–∫–æ–Ω–∫—É) –∏ –≤—Ç–æ—Ä—É—é (–æ—Ä–∏–≥–∏–Ω–∞–ª) –∫–∞—Ä—Ç–∏–Ω–∫–∏ –∏–∑ –ø–æ–ª—è `images`.
  - –ó–∞–≥—Ä—É–∂–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–∑ S3 –∏ –Ω–∞—Ö–æ–¥–∏—Ç –æ–±–ª–∞—Å—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –º–µ–∂–¥—É –Ω–∏–º–∏ —Å –ø–æ–º–æ—â—å—é –∞–ª–≥–æ—Ä–∏—Ç–º–∞ SIFT –∏ –≥–æ–º–æ–≥—Ä–∞—Ñ–∏–∏.
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç –º–∞—Å—à—Ç–∞–± –≤—ã–¥–µ–ª–µ–Ω–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏, –µ—Å–ª–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å–ª–∏—à–∫–æ–º –º–∞–ª–µ–Ω—å–∫–∏–º.
  - –û–±—Ä–µ–∑–∞–µ—Ç, –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –ø–æ–ª—É—á–µ–Ω–Ω—ã–π —Ñ—Ä–∞–≥–º–µ–Ω—Ç –≤ —Ñ–æ—Ä–º–∞—Ç–µ WebP (—Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –∞–ª—å—Ñ–∞-–∫–∞–Ω–∞–ª–∞, –µ—Å–ª–∏ –æ–Ω –µ—Å—Ç—å).
  - –ó–∞–≥—Ä—É–∂–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ S3 –≤ –ø–∞–ø–∫—É `processed` –∏ –¥–æ–ø–∏—Å—ã–≤–∞–µ—Ç URL –≤ –º–∞—Å—Å–∏–≤ `images` —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–≥–æ Mongo-–¥–æ–∫—É–º–µ–Ω—Ç–∞.
  - –ü—Ä–∏ –æ—à–∏–±–∫–∞—Ö –∑–∞–ø–∏—Å–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∫–∞) ‚Äî –ª–æ–≥–∏—Ä—É–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ —Ñ–∞–π–ª `error_log.txt`.

üìå –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ñ–∏–Ω–∞–ª—å–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Å –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å—é

#### s3_test.py

–ø–æ–ª—É—á–∞–µ—Ç JSON —Å API, –∑–∞–≥—Ä—É–∂–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ MinIO (S3), –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å—Å—ã–ª–∫—É –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π JSON –Ω–∞ –¥–∏—Å–∫

#### web_crawler_1.py

—Å–∫–∞—á–∏–≤–∞–µ—Ç –≤—Å–µ url-–∞–¥—Ä–µ—Å–∞ —Å—Ç—Ä–∞–Ω–∏—Ü —Å—É—â–µ—Å—Ç–≤ –∏–∑ –±–µ—Å—Ç–∏–∞—Ä–∏—è —Å API `ttg.club`, –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –≤ –æ–¥–∏–Ω —Å–ø–∏—Å–æ–∫ –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∫–∞–∫ `bestiary_data.json`

## actions_processor_llm

```bash
py -3.10 -m venv venv_open_router
```
```bash
venv_open_router\Scripts\activate 
```
```bash
pip install -r .\actions_processor_llm\requirements.txt
```

gRPC –º–∏–∫—Ä–æ—Å–µ–≤–∏—Å –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏–π —Å—É—â–µ—Å—Ç–≤–∞ –≤ –≤–∏–¥–µ —Ä–∞—Å–ø–∞—Ä—à–µ–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

–î–ª—è —Ä–∞–±–æ—Ç—ã —Ç—Ä–µ–±—É–µ—Ç—Å—è `secrets.json` —Å –ø—Ä–æ–∫—Å–∏ 

### –§–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞ `secrets.json`

–§–∞–π–ª `secrets.json` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è API-–∫–ª—é—á–µ–π OpenAI –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö –ø—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä–æ–≤.

#### –ü—Ä–∏–º–µ—Ä —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ:

```json
{
    "api_keys_with_proxies": [
        {
            "api_key": "sk-or-v1-xxxxxxxxxxxxxxxxxxxxxxxxx",
            "proxy": "socks5://username:password@127.0.0.1:5000"
        },
        {
            "api_key": "sk-or-v1-xxxxxxxxxxxxxxxxxxxxxxxxx",
            "proxy": "socks5://username:password@127.0.0.1:5000"
        }
    ]
}
```
### –î–ª—è –∑–∞–ø—É—Å–∫–∞

```bash
python3 battle_description_ms/main.py
```

### –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞

```bash
python3 battle_description_ms/client.py
```